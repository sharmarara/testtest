{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {},
    "functions": [],
    "variables": {
        "approutetable": "brs-euw-udr-t-app",
        "dbiaasroutetable": "brs-euw-udr-t-dbiaas",
        "dbpaasroutetable": "brs-euw-udr-t-dbpaas",
        "feiaasroutetable": "brs-euw-udr-t-feiaas",
        "fepaasroutetable": "brs-euw-udr-t-fepaas",
        "aksroutetable": "brs-euw-udr-t-aks",
        "dna01routetable": "brs-euw-udr-t-dna-01",
        "dna02routetable": "brs-euw-udr-t-dna-02",
        "dna03routetable": "brs-euw-udr-t-dna-03",
        "avdroutetable": "brs-euw-udr-t-avd",
        "SubnetApp": "brs-euw-snt-t-app",
        "SubnetFeiaas": "brs-euw-snt-t-feiaas",
        "SubnetFepass": "brs-euw-snt-t-fepaas",
        "SubnetDbiaas": "brs-euw-snt-t-dbiaas",
        "SubnetDbpaas": "brs-euw-snt-t-dbpaas",
        "Subnetaks": "brs-euw-snt-t-aks",
        "Subnetdna01": "brs-euw-snt-t-dna-01",
        "Subnetdna02": "brs-euw-snt-t-dna-02",
        "Subnetdna03": "brs-euw-snt-t-dna-03",
        "Subnetavd": "brs-euw-snt-t-avd",
        "nsgsubnetapp": "brs-euw-nsg-t-app",
        "nsgsubnetFeiaas": "brs-euw-nsg-t-dbiaas",
        "nsgsubnetFepaas": "brs-euw-nsg-t-dbpaas",
        "nsgsubnetDbiaas": "brs-euw-nsg-t-feiaas",
        "nsgsubnetdbpaas": "brs-euw-nsg-t-fepaas",
        "nsgsubnetdna01": "brs-euw-nsg-t-dna-01",
        "nsgsubnetdna02": "brs-euw-nsg-t-dna-02",
        "nsgsubnetdna03": "brs-euw-nsg-t-dna-03",
        "nsgsubnetavd": "brs-euw-nsg-t-avd",
        "brstestvirtualnetwork": "brs-euw-vnt-t-01"
    },
    "resources": [
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('SubnetApp'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.1.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('approutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetapp'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "microsoft.storage"
                    },
                    {
                        "service": "microsoft.keyvault"
                    }
                ]

            }
        },
        {
            "name": "[variables('approutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-app-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-app-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-app-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('SubnetDbiaas'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.3.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('dbiaasroutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetDbiaas'))]"
                },
                "serviceEndpoints": [

                ]

            }
        },
        {
            "name": "[variables('dbiaasroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('approutetable'))]"
            ],

            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbiaas-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('SubnetDbpaas'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.4.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('dbpaasroutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetdbpaas'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "microsoft.storage"
                    }
                ]

            }
        },
        {
            "name": "[variables('dbpaasroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('dbiaasroutetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dbpaas-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('SubnetFeiaas'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.0.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('feiaasroutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetFeiaas'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "microsoft.storage"
                    }
                ]

            }
        },
        {
            "name": "[variables('feiaasroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('dbpaasroutetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-feiaas-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-feiaas-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('SubnetFepass'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.2.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('fepaasroutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetFepaas'))]"
                },
                "serviceEndpoints": [

                ]

            }
        },
        {
            "name": "[variables('fepaasroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('feiaasroutetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-fepaas-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-fepaas-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('Subnetaks'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.8.0/22",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('aksroutetable'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "microsoft.keyvault"
                    }

                ]
            }
        },
        {
            "name": "[variables('aksroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('fepaasroutetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-aks-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('Subnetdna01'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.12.0/26",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('dna01routetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetdna01'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }

                ]

            }
        },
        {
            "name": "[variables('dna01routetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('aksroutetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-dna-01-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-01-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('Subnetdna02'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.13.0/26",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('dna02routetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetdna02'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }

                ]

            }
        },
        {
            "name": "[variables('dna02routetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('dna01routetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-dna-02-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-02-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('Subnetdna03'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.14.0/26",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('dna03routetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetdna03'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }

                ]

            }
        },
        {
            "name": "[variables('dna03routetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('dna02routetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-dna-03-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-dna-03-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        },
        {
            "name": "[concat(variables('brstestvirtualnetwork'),'/',variables('Subnetavd'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.48.5.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('avdroutetable'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgsubnetavd'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }

                ]

            }
        },
        {
            "name": "[variables('avdroutetable')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "dependsOn": [
                "[resourceId('Microsoft.Network/routeTables', variables('dna03routetable'))]"
            ],
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }

},
                    {
                        "name": "brs-euw-udr-t-avd-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brs-euw-udr-t-avd-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]

            }
        }
    ],
    "outputs": {}
}