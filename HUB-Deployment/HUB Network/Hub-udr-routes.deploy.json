{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {},
    "functions": [],
    "variables": {
        "hubroutetablecpext": "brh-euw-udr-p-hub-cp-ext",
        "hubroutetablecpint": "brh-euw-udr-hub-cp-int",
        "hubroutetablegatewaysubnet": "brh-euw-udr-p-hub-gw",
        "hubroutetableinfra": "brh-euw-udr-p-hub-infra",
        "hubroutetablejpmgmt": "brh-euw-udr-p-hub-jp-mgmt",
        "hubroutetablemgmt": "brh-euw-udr-p-hub-mgmt",
        "hubroutetablewafmgmt": "brh-euw-udr-p-hub-waf-mgmt",
        "hubroutetableimg": "brh-euw-udr-p-hub-img",
        "hubroutetableshir": "brh-euw-udr-p-hub-shir",
        "hubvirtualnetwork": "brh-euw-vnt-p-hub",
        "nsgcpext": "brh-euw-nsg-p-hub-cp-ext",
        "nsgcpint": "brh-euw-nsg-p-hub-cp-int",
        "nsginfra": "brh-euw-nsg-p-hub-infra",
        "nsgjpmgmt": "brh-euw-nsg-p-hub-jp-mgmt",
        "nsgmgmt": "brh-euw-nsg-p-hub-mgmt",
        "nsgwafmgmt": "brh-euw-nsg-p-hub-waf",
        "nsgimg": "brh-euw-nsg-p-hub-img",
        "nsgshir": "brh-euw-nsg-p-hub-shir",
        "subnetcpext": "brh-euw-snt-p-hub-cp-ext",
        "subnetcpint": "brh-euw-snt-p-hub-cp-int",
        "subnetinfra": "brh-euw-snt-p-hub-infra",
        "gatewaysubnet": "Gatewaysubnet",
        "subnetjpmgmt": "brh-euw-snt-p-hub-jp-mgmt",
        "subnetmgmt": "brh-euw-snt-p-hub-mgmt",
        "subnetwafmgmt": "brh-euw-snt-p-hub-waf-mgmt",
        "subnetimg": "brh-euw-snt-p-hub-img",
        "subnetshir": "brh-euw-snt-p-hub-shir"
    },
    "resources": [
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetinfra'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.0.128/26",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetableinfra'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsginfra'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetableinfra')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-udr-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-infra-to-gatewaysubnet",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetmgmt'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.2.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablemgmt'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgmgmt'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablemgmt')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "VirtualAppliance", 
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-udr-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-mgmt-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('gatewaysubnet'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.0.96/27",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablegatewaysubnet'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablegatewaysubnet')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": false,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-infra-cp-int",
                        "properties": {
                            "addressPrefix": "10.45.0.16/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-dwf-chocolately",
                        "properties": {
                            "addressPrefix": "10.3.2.5/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.53.2.4"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-dwf-backend",
                        "properties": {
                            "addressPrefix": "10.3.2.11/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.53.2.4"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-dwf-oms",
                        "properties": {
                            "addressPrefix": "10.3.3.4/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.53.2.4"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-dwf-sap",
                        "properties": {
                            "addressPrefix": "10.5.6.4/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.53.2.4"
                        }
                    },
                    {
                        "name": "brh-trn-euw-udr-hub-gw-to-dwf-blueprism",
                        "properties": {
                            "addressPrefix": "10.60.0.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.53.2.4"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-gw-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetcpext'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.0.0/28",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablecpext'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgcpext'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablecpext')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-jp-trust",
                        "properties": {
                            "addressPrefix": "10.45.0.48/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-gatewaysubnet",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-cp-int",
                        "properties": {
                            "addressPrefix": "10.45.0.16/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-cp-ext-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "None"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetjpmgmt'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.0.64/28",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablejpmgmt'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgjpmgmt'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablejpmgmt')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": false,
                "routes": [
                    {
                        "name": "brh-euw-snt-p-hub-jp-mgmt-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        }
                    },


                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-Internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmtto-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-jp-mgmt-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "None"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetwafmgmt'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.1.0/24",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablewafmgmt'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgwafmgmt'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablewafmgmt')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-Internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-Onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-Onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-waf-mgmt-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetcpint'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.0.16/28",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetablecpint'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgcpint'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetablecpint')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-brheuwslphubwaf0-nic1",
                        "properties": {
                            "addressPrefix": "10.45.1.4/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.1.4"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-brheuwslphubwaf0-nic0",
                        "properties": {
                            "addressPrefix": "10.45.1.5/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.1.5"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-gatewaysubnet",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.1.5"
                        }
                    },
                    {
                        "name": "brh-euw-udr-hub-cp-int-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "None"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetimg'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.4.0/28",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetableimg'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgimg'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetableimg')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-img-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-udr-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-udr-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-snt-p-hub-shir",
                        "properties": {
                            "addressPrefix": "10.45.5.0/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-imgto-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-img-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        },
        {
            "name": "[concat(variables('hubvirtualnetwork'),'/',variables('subnetshir'))]",
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2018-10-01",
            "location": "West Europe",
            "properties": {
                "addressPrefix": "10.45.5.0/27",
                "routeTable": {
                    "id": "[resourceId('Microsoft.Network/routeTables',variables('hubroutetableshir'))]"
                },
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups',variables('nsgshir'))]"
                },
                "serviceEndpoints": [
                    {
                        "service": "Microsoft.KeyVault",
                        "locations": [
                            "West Europe"
                        ]
                    },
                    {
                        "service": "Microsoft.storage",
                        "locations": [
                            "West Europe"
                        ]
                    }
                ]
            }
        },
        {
            "name": "[variables('hubroutetableshir')]",
            "type": "Microsoft.Network/routeTables",
            "location": "West Europe",
            "apiVersion": "2019-11-01",
            "properties": {
                "disableBgpRoutePropagation": true,
                "routes": [
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.49.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-Ecoplast-database",
                        "properties": {
                            "addressPrefix": "1.1.1.242/32",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-vnt-p-hubdmz",
                        "properties": {
                            "addressPrefix": "10.47.0.0/16",
                            "nextHopType": "None"
                        } 
},
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.48.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.52.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.46.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-onpremise",
                        "properties": {
                            "addressPrefix": "10.0.0.0/8",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-onpremise1",
                        "properties": {
                            "addressPrefix": "155.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }


                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-internet",
                        "properties": {
                            "addressPrefix": "0.0.0.0/0",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.20"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-snt-p-hub-jp-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.0.64/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-snt-p-hub-cp-ext",
                        "properties": {
                            "addressPrefix": "10.45.0.0/28",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-udr-p-hub-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.2.0/24",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-udr-p-hub-infra",
                        "properties": {
                            "addressPrefix": "10.45.0.128/26",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-udr-p-hub-gw",
                        "properties": {
                            "addressPrefix": "10.45.0.96/27",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-snt-p-hub-waf-mgmt",
                        "properties": {
                            "addressPrefix": "10.45.1.0/24",
                            "nextHopType": "None"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-brh-euw-snt-p-hub-img",
                        "properties": {
                            "addressPrefix": "10.45.4.0/28",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-exs-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.56.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-exs-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.58.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-exs-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.59.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-exs-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.55.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-ces-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.73.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-ces-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.75.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-ces-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.76.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-ces-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.71.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-pos-euw-vnt-t-01",
                        "properties": {
                            "addressPrefix": "10.66.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-pos-euw-vnt-u-01",
                        "properties": {
                            "addressPrefix": "10.68.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-pos-euw-vnt-p-01",
                        "properties": {
                            "addressPrefix": "10.62.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    },
                    {
                        "name": "brh-euw-udr-p-hub-shir-to-pos-euw-vnt-d-01",
                        "properties": {
                            "addressPrefix": "10.65.0.0/16",
                            "nextHopType": "VirtualAppliance",
                            "nextHopIpAddress": "10.45.0.52"
                        }
                    }
                ]
            }
        }
    ],
    "outputs": {}
}